node js
--------
node js is a runtime for javascript environment built on chrome engine v8

Node.js uses an event-driven, non-blocking model.It can handle many connections at once without waiting for one to finish before starting another.

to work with node js u need to install node in our system from official docs(nodejs.org)

node -v ==> to check that node is installed or Not


inbuilt modules in node js are 

fs,path,http,os etc 

in node js they provide http methods like get,put(patch),post,delete

node js had some limitations
------------------------------
Limitation	Details / Impact
Single-threaded	CPU-intensive tasks block event loop
Callback hell	Hard-to-maintain nested callbacks
CPU-bound tasks	Not efficient for heavy computation
Library support	Some niche libraries are limited
Error handling	Async errors can crash server
SQL-heavy apps	Complex joins may be slower
API stability	Breaking changes in Node/npm
Multi-core utilization

they moved to from node to express 


express js
-----------
node js framework for building web apps

npm ==> node package manager 


npm init will create a package.json in our folder 

package.json ==> will contain all the details about our file 

npm init -y ==> create a package .json automatically 

if u want install any package from npm registry 

npm install packagename or npm i packagename

how to create a basic express server

const express = require('express');
const app = express();

const HOSTNAME = 'localhost',PORT=6500;


app.listen(HOSTNAME,PORT,()=>{console.log(`Server stared at ${HOSTNAME}:${PORT}`)})

middleware
----------
middleware is a function that has access to the request & response objects in node/express application 
it sits b/w client request  & the final route handler
it is the main purpose is to process requests modify data  or perform actions before pasing control to the next function 

middleware function 
---------------------
function middleware(req,res,next)
{
    //do something
    next()//pass control to the next middleware
}

req ==> http req object
res ==> http res object
next ==> a function to pass control to the next middleware or route handler

types of middleware
-------------------
application level middleware
router level middleware
builtin middleware
thirdparty middleware
error handling middleware


application level middleware
---------------------------
applied to entire app or  specific routes

example
--------
const express = require('express');
const app = express();

app.use((req, res, next) => {
    console.log(`${req.method} request to ${req.url}`);
    next(); // Pass to next middleware or route
});

app.get('/', (req, res) => {
    res.send('Hello World');
});


router level middleware
-----------------------
applied to a specific router

const router = express.Router();

router.use((req, res, next) => {
    console.log('Router middleware triggered');
    next();
});

router.get('/users', (req, res) => {
    res.send('Users route');
});

app.use('/api', router);


builtin middleware
-------------------
Express provides some middleware out of the box:
 to accepth the data from front end in json format 

app.use(express.json()); // Parse JSON body
app.use(express.urlencoded({ extended: true })); // Parse form data


Third-Party Middleware
----------------------
Examples: cors, helmet, morgan, body-parser.
to send the data from frontend to backend(form-handling)
const cors = require('cors');
app.use(cors()); // Enables Cross-Origin Resource Sharing


Error-Handling Middleware
-----------------------------
Special middleware for handling errors. Has 4 parameters: (err, req, res, next)

app.use((err, req, res, next) => {
    console.error(err.stack);
    res.status(500).send('Something broke!');
});


routes
------
routes define how an application responds to client request(based on url & http method)
each route specifies

path/endpoint ==> /users ,/products/:id
http methods ==> post,get,put,delete,patch 
callback function handler ==> what should happen when that route is hit


 What is MVC?
 -----------
Itâ€™s an architectural pattern to structure code in web applications.

M (Model) â†’ Data and Database logic (SQL/NoSQL queries, schema).

V (View) â†’ UI/Frontend (HTML, EJS, React, etc.).

C (Controller) â†’ Handles requests, processes data from Model, and sends response (View or JSON).



body,params,query,headers,files
--------------------------------

body
-----
req.body==> data sent in req.body via post/put/patch

Creating data â†’ POST,Updating data â†’ PUT / PATCH,Logging in,Registering,Sending JSON objects
where we use :user registration,login,form-submission,store or update-data

ex:app.post('/users', (req, res) => {
    console.log(req.body); 
});



params
-------
use req.params when the value is a part of url itself

Get user by ID,Delete user by ID,Update user by ID

ex:app.get('/users/:id', (req, res) => {
    console.log(req.params.id); 
});


query
------
Used for data sent after ? in the URL.
Searching,Filtering,Pagination,Sorting

ex:GET /users?page=2&limit=10

app.get('/users', (req, res) => {
    console.log(req.query.page);
});

headers
--------
 req.headers â€” Useful for tokens / auth data
Common for authentication data like JWT tokens.
Ex
const token = req.headers['authorization'];

Checking JWT token,API key,Custom headers,Device info

files
-------
req.files â€” Upload files (using multer)

Used when uploading:

Images,PDFs,Excel files

Example:
app.post('/upload', upload.single('photo'), (req, res) => {
    console.log(req.file);
});
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------
ðŸ” Summary Table
Node.	                    Express.
JavaScript runtime	        Framework for Node.
Handles core modules	    Adds structure & routing
Can build servers manually	Provides app.get(), app.post(), etc.
Fast, non-blocking	        Simplifies web development
Uses require()	            Also uses require() or import




req params
----------
in url we have 

https://www.flipkart.com/watches/type=digital& rating = 5;

https: protocol()
www.flipkart.com :domain
watches:paramaters
type=digital& rating = 5:query parameters


client-server(request)
----------------------
http request
http response


http request ==> start line headers,body
start line==> url,http_version,http_method
headers ==> request_headers,general_headers,representation_headers
body==> additional info will be sent in body


http response ==> status line,headers,body

status ==> status code & statusText
headers ==> request_headers,general_headers,representation_headers
body ==> additional info will be sent in body


req properties
--------------
/* req properties  */
/* to get the id  */

const express = require('express');
const app = express();



app.get('/users/:id',(req,res)=>
{
    console.log(req.params.id); //get the id
})


app.get('/search',(req,res)=>
{
    console.log(req.query.term); //Purpose: Get query string parameters (e.g., /search?term=book)
    
})

/* body complete */

app.use(express.on());

app.post('/users', (req, res) => {
  console.log(req.body.name);  // Access posted data
});


/* http headers  */

app.get('/', (req, res) => {
  console.log(req.headers['user-agent']);  // Browser info
});


/* http methods get,put,post,delete */
app.use((req, res, next) => {
  console.log(req.method);  // Logs request method
  next();
});



/* to get the url */
app.use((req, res, next) => {
  console.log(req.url);  // "/products?id=2"
  next();
});

/* path without query string */
app.use((req, res, next) => {
  console.log(req.path);  // "/products"
  console.log(req.ip);
  next();
});

/* for original url*/
console.log(req.originalUrl);  // "/api/products/12?sort=desc"



/* req.cookies (if using cookie-parser middleware)*/
const cookieParser = require('cookie-parser');
app.use(cookieParser());

app.get('/', (req, res) => {
  console.log(req.cookies);  // { token: 'abc123' }
});




app.post('/submit/:id', (req, res) => {
  console.log(req.params);     // { id: '123' }
  console.log(req.query);      // { sort: 'asc' }
  console.log(req.body);       // { name: 'John' }
  console.log(req.headers);    // Request headers
  console.log(req.method);     // "POST"
});




const PORT =6900,HOSTNAME ='127.0.0.1';

app.listen(PORT,HOSTNAME,()=>
{
    console.log(`Server started at ${HOSTNAME}:${PORT} `);
    
})


Purpose: Sends a plain response (string, object, or array)




res.send('Hello');            // Sends plain text
res.send({ name: 'John' });   // Sends ON (automatically)
ðŸ”¹ 2. res.on()
Purpose: Sends a ON response (recommended over send for APIs)




res.on({ status: 'success', data: { name: 'John' } });
ðŸ”¹ 3. res.status()
Purpose: Sets the HTTP status code




res.status(200).send('OK');
res.status(404).send('Not found');
res.status(500).on({ error: 'Something went wrong' });
ðŸ”¹ 4. res.sendFile()
Purpose: Sends a file as response (e.g., PDF, image)




res.sendFile(__dirname + '/files/report.pdf');
ðŸ”¹ 5. res.redirect()
Purpose: Redirects the user to another URL




res.redirect('/login');
res.redirect('https://google.com');
ðŸ”¹ 6. res.set() / res.setHeader()
Purpose: Sets a custom response header




res.set('Content-Type', 'text/html');
res.setHeader('X-Powered-By', 'Node.');
ðŸ”¹ 7. res.cookie()
Purpose: Set a cookie in the browser (requires cookie-parser middleware)




res.cookie('token', 'abc123', { httpOnly: true });
ðŸ”¹ 8. res.clearCookie()
Purpose: Clear a cookie




res.clearCookie('token');
ðŸ”¹ 9. res.end()
Purpose: Ends the response (used in low-level cases)




res.end();  // Send no data, just end the response
ðŸ”¹ 10. res.download()
Purpose: Triggers a file download in the browser




res.download(__dirname + '/files/manual.pdf');
âœ… Common Combinations:



res.status(200).on({ message: 'Success' });
res.status(400).send('Bad Request');
res.set('X-My-Custom-Header', '123');
ðŸ“Œ Real Example:



app.get('/user', (req, res) => {
  const user = { name: 'Alice', age: 25 };

  if (!user) {
    return res.status(404).on({ error: 'User not found' });
  }

  res.status(200).on(user);
});


âœ… Most Commonly Used req (Request) Properties
Property / Method	Description	Example
req.params	Route parameters	/users/:id â†’ req.params.id
req.query	Query string data	/users?name=John â†’ req.query.name
req.body	Body data (POST/PUT)	req.body.email (needs express.json())
req.method	HTTP method used	GET, POST, etc.
req.url	Full request path	/users/1?active=true
req.headers	Request headers	req.headers['user-agent']
req.get()	Shortcut for headers	req.get('Authorization')
req.ip	Client IP address	Useful for logging/security
req.cookies	Cookies sent by client	Requires cookie-parser
req.originalUrl	URL before middleware changes	Useful in routers/middleware

âœ… Most Commonly Used res (Response) Methods
Method / Property	Description	Example
res.send()	Sends response (string/object/array)	res.send('OK')
res.json()	Sends JSON data	res.json({ name: 'Alice' })
res.status()	Sets HTTP status code	res.status(404).send('Not Found')
res.redirect()	Redirects to another URL	res.redirect('/login')
res.sendFile()	Sends a file	res.sendFile(__dirname + '/file.pdf')
res.download()	Prompts file download	res.download('report.pdf')
res.set() / res.setHeader()	Sets response header	res.set('X-App', 'CabApp')
res.cookie()	Sets a cookie	res.cookie('token', 'abc123')
res.clearCookie()	Clears a cookie	res.clearCookie('token')
res.statusMessage	Sets custom status message	res.statusMessage = 'All Good'



Then on frontend:


response.data.success  // true
response.data.data     // { id: 1, name: 'Ram' }

 What is the structure of a typical response object in Axios?


{
  data: {},             // ðŸ‘ˆ Actual response body from backend (most used)
  status: 200,          // HTTP status code
  statusText: "OK",     
  headers: {},          
  config: {},           // Axios config of the request
  request: {}           // XMLHttpRequest object
}
So you mostly use:

response.data

response.data.data

response.data.success

response.status (if you need the HTTP status)

âœ… Summary
Term	Source	Accessed in	Description
response.data	Backend	Frontend (Axios)	Body/data sent by backend
response.data.data	Backend	Frontend	Nested key inside response
response.success	Custom	Frontend	Only if backend returns a success key



response.success => true| false
response.status => status 200,400,500,404,
response.data.data ==> the original data is here {name:'ajay',age:20}



âœ… For SELECT Queries:
You use result.recordset to access the fetched data.


const result = await pool.request().query('SELECT * FROM newEmp');
console.log(result.recordset); // ðŸ”¹ Array of rows

âœ… For INSERT, UPDATE, DELETE Queries:
You use result.rowsAffected to check how many rows were impacted.


const result = await pool.request()
  .input('id', mssql.Int, 1)
  .input('email', mssql.NVarChar(100), 'a@a.com')
  .input('password', mssql.NVarChar(100), '123')
  .query('INSERT INTO newEmp (id, email, password) VALUES (@id, @email, @password)');

console.log(result.rowsAffected); // ðŸ”¹ [1] if one row inserted
ðŸ” Structure of result Object
Hereâ€™s what result usually looks like:


{
  recordsets: [ [ ... ] ],    // All result sets (multi-result queries)
  recordset: [ ... ],         // First result set (used for SELECT)
  rowsAffected: [1],          // Array showing rows affected per statement
  output: {},                 // For output parameters (if any)
  returnValue: undefined      // Return value from stored procedures
}
âœ… Example: Use recordset or rowsAffected?
Query Type	What to Use	Example
SELECT	result.recordset	.recordset.map(row => row.email)
INSERT	result.rowsAffected	[1] if one row was inserted
UPDATE	result.rowsAffected	[1] if one row was updated
DELETE	result.rowsAffected	[0] if no rows were deleted





except id filed remainng will all are coming from body (req.body)

id will come from req.params